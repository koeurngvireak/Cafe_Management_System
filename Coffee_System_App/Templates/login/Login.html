{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Coffee Management System - Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/auth.css' %}" rel="stylesheet" />
  </head>
  <body>
    {% if messages %}
    <div class="message-container">
      {% for message in messages %}
      <div
        class="alert alert-{{ message.tags }} alert-dismissible fade show"
        role="alert"
      >
        {{ message }}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
        ></button>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <div class="login-container">
      <div class="login-box">
        <div class="login-header">
          <i class="fas fa-mug-hot"></i>
          <h2>Coffee Management</h2>
          <p>Welcome back! Please login to your account.</p>
        </div>

        <form method="POST" action="{% url 'login' %}">
          {% csrf_token %}
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-user"></i></span>
              <input
                type="text"
                name="username"
                class="form-control"
                placeholder="Username"
                required
              />
            </div>
          </div>

          <div class="form-group">
            <div class="input-group">
              <span class="input-group-text"><i class="fas fa-lock"></i></span>
              <input
                type="password"
                name="password"
                class="form-control"
                placeholder="Password"
                required
              />
              <button
                type="button"
                class="btn btn-outline-secondary toggle-password"
              >
                <i class="far fa-eye"></i>
              </button>
            </div>
          </div>

          <div class="form-check mb-3">
            <input
              type="checkbox"
              class="form-check-input"
              name="remember"
              id="remember"
            />
            <label class="form-check-label" for="remember">Remember me</label>
          </div>

          <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
      </div>
    </div>
    <!-- Cookie Consent Banner -->
    <div
      id="cookieBanner"
      class="alert alert-info fixed-bottom mb-0 text-center"
      role="alert"
      style="display: none"
    >
      This site uses cookies to improve your experience.
      <button id="acceptCookies" class="btn btn-sm btn-primary ml-2">
        Accept
      </button>
    </div>

    <!-- Cookie Consent Script -->
    <script>
      // Show banner only if cookie not set
      window.onload = function () {
        if (!localStorage.getItem("cookiesAccepted")) {
          document.getElementById("cookieBanner").style.display = "block";
        }
      };

      // When user clicks "Accept"
      document.getElementById("acceptCookies").onclick = function () {
        localStorage.setItem("cookiesAccepted", "true");
        document.getElementById("cookieBanner").style.display = "none";
      };
    </script>
  </body>
</html>
